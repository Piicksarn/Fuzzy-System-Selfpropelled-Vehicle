<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Demo for Fuzzy System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.1.0/math.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.1.2/js/ion.rangeSlider.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js">
    <script type="text/javascript" src="js/DataShow.js"></script>
    <script type="text/javascript" src="js/Coordinate.js"></script>
    <script type="text/javascript" src="js/Vehicle.js"></script>
    <script type="text/javascript" src="js/Rule.js"></script>
    <script type="text/javascript" src="js/Fuzzifier.js"></script>
    <script type="text/javascript" src="js/FuzzySystem.js"></script>
    <script type="text/javascript" src="js/Maze.js"></script>
    <script type="text/javascript" src="js/Line.js"></script>
    <script type="text/javascript" src="js/Wall.js"></script>
    <script type="text/javascript" src="js/FootPrint.js"></script>
    <script type="text/javascript" src="js/CanvasFrame.js"></script>
    <script type="text/javascript" src="http://beneposto.pl/jqueryrotate/js/jQueryRotateCompressed.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.1.2/css/ion.rangeSlider.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.1.2/css/ion.rangeSlider.skinFlat.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
  </head>

  <body>
    <!-- Menu Part :
        The Position part should change to use mouse listener.
        Make the vehicle to start at the position where the mouse click.
    -->
    <div id="toggle"></div>
    <div class="menu closed">
      <h1 style="margin-left: 20px">Setting</h1>
      <ul>
        <li>
          Position
          <input type="text" id="xPos" placeholder="X" class="settingText">
          <input type="text" id="yPos" placeholder="Y" class="settingText">
          Angle
          <input type="text" id="range" value="" name="range" />
          Rate
          <input type="text" id="Rrange" value="" name="Rrange" />
          <br/>
          <input type="button" id="startBtn" value="Start" class="startBtn"/>
      </ul>
    </div>
    <!-- The Main Part-->
    <div style="width: 100%; height:100%;">

      <!-- Title bar-->
      <div class="title">
        <h1>Self-propelled vehicle â€¢ HW-1</h1>
      </div>

      <!-- Body part-->
      <div style="width: 100%; height:100%; padding: 10px;">
        <!--For canvas-->
        <div class="container">
          <canvas id="canvas" width="760" height="600"></canvas>
        </div>
        <!--For Data showing-->
        <div class="showData" id="showData">
          <div>
            <h2 style="margin-left: 10px;">Initial Setting</h2>
          </div>
          <div class="dataPad">
              <li><a><i class="fa fa-car"></i> Vehicle Position</li>
              <div class="hidenData"><b id="Ipos"></b></div>
              <li><a><i class="fa fa-undo"></i></i> Initial Angel</li>
              <div class="hidenData" id="IAng"><b id="angle"></b></div>
              <li><a><i class="fa fa-bullseye"></i> Initial Sensors</li>
              <div class="hidenData" id="ISens"></div>

          </div>
          <div>
            <h2 style="margin-left: 10px;">Result</h2>
          </div>
          <div class="dataPad">
              <li><a><i class="fa fa-car"></i> Vehicle Position</li>
              <div class="hidenData"><b id="Ipos"></b></div>
              <li><a><i class="fa fa-undo"></i></i> Initial Angel</li>
              <div class="hidenData" id="IAng"><b id="angle"></b></div>
              <li><a><i class="fa fa-bullseye"></i> Initial Sensors</li>
              <div class="hidenData" id="ISens"></div>

          </div>
        </div>
      </div>
    <div>
    <script>

      var canvasF = new CFrame();
      $(document).ready(function() {
        var rate = 5;
        var x = 0;
        var y = 0;
        var maze = new Maze();
        maze.drawItem();
      });

      // Setting the initial angle
      var $range = $("#range"),
      $result = $("#angle");
      var angleset = 0;
      var track = function (data) {
        $result.html("Angle: " + data.from);
        angleset = data.from;
        initState(angleset);
      };
      $range.ionRangeSlider({
        hide_min_max: true,
        keyboard: true,
        min: -90,
        max: 270,
        from: 45,
        grid: true,
        onStart: track,
        onChange: track,
        onFinish: track,
        onUpdate: track
      });

     var doSetting = function() {
       $('#Ipos').text("[x,y] = ["+$('#xPos').val()+" , "+ $('#yPos').val()+"] ");//= ;
       canvasF.setSystem(angleset, $('#xPos').val(), $('#yPos').val());
     };
     $(function () {
       var $Rrange = $("#Rrange");
       rate = $("#rate");
       var Rtrack = function (data) {
         rate = data.from;
       };
      $("#Rrange").ionRangeSlider({
          hide_min_max: true,
          keyboard: true,
          min: 1,
          max: 20,
          from: 5,
          grid: true,
          onStart: Rtrack,
          onChange: Rtrack,
          onFinish: Rtrack,
          onUpdate: Rtrack
      });

    });
      $( "#toggle" ).click(function() {
        $(".menu").toggleClass("closed");
        $(this).toggleClass("closed");
        $(".content").toggleClass("closed");
        $("#wrapper").toggleClass("closed")
      });
      $("#startBtn").click(function() {
        $(".menu").toggleClass("closed");
        $("#toggle").toggleClass("closed");
        $(".content").toggleClass("closed");
        $("#wrapper").toggleClass("closed");
        doSetting();
        canvasF.setStart();
      });
    </script>
  </body>
</html>
